{% block header %}
/**
 * This file is automatically generated by the `@indirectus/cli` package.
 * Follow the package's instruction to update this file with the latest schema.
 */
{% endblock %}

{% block imports %}
import type * as Directus from "@directus/sdk";
import type { Query as Query$ } from "@directus/sdk";
import {
  readSingleton as readSingleton$,
  readItems as readItems$,
  readItem as readItem$
} from "@directus/sdk";
{% endblock %}

export namespace Types {
{% block types %}
  // Internal
  export type Nullable<T> = T | null;
  export type Optional<T> = Nullable<T>;
  export type UnknownType<T> = T | unknown;

  // Numbers
  export type BigInteger = number;
  export type Decimal = number;
  export type Float = number;
  export type Integer = number;
  export type Number = number;
  export type Number = number;

  // Buffers
  export type Binary = string;
  export type String = string;
  export type Text = string;

  // Date & Time
  export type Date = string | globalThis.Date;
  export type DateTime = string | globalThis.Date;

  // Geometry
  export namespace Geometry {
    export type LineString = any;
    export type MultiLineString = any;
    export type MultiPoint = any;
    export type MultiPolygon = any;
    export type Point = any;
    export type Polygon = any;
  }

  // Complex
  export type JSON = any;
  export type JSONSchema = any;

  // Others
  export type UUID = string;
  export type Boolean = boolean;
{% endblock %}
}

/**
 * System collections.
 */

export namespace Collections {
{% for collection in registry.collections -%}
{% if collection.is_system %}

{%- set field_count = collection.fields | only_custom_fields | length -%}
{%- if field_count > 0 -%}
  {% filter comment -%}
  The extra fields added to the {{ collection.name | to_collection_text }} collection.
  {% endfilter %}
  export interface Extra{{ collection.name | to_collection_name }} {
    {%- for field in collection.fields | only_custom_fields %}
      {%- set type = field | to_ts_type -%}
      {%- if type != 'never' %}
        {{ field.name | to_ts_identifier }}: {{ type }};
      {%- endif -%}
    {%- endfor %}
  };
{% endif %}

  {% filter comment -%}
  The resolved {{ collection.name | to_collection_text }} collection type.
  {% endfilter %}
  export type {{ collection.name | to_collection_name }} = Directus.{{ collection.name | to_collection_name }}<Schema>;
{% endif %}
{% endfor %}
}



/**
 * User collections.
 */
export namespace Collections {
{% for collection in registry.collections -%}
{% if not collection.is_system %}
  /**
   * The {{ collection.name | space_case | lower_case }} collection.
   */
  export interface {{ collection.name | pascal_case }} {
{%- for field in collection.fields %}
{%- set type = field | to_ts_type -%}
{%- if type != 'never' %}
  {{ field.name | to_ts_identifier }}: {{ type }};
{%- endif -%}
{%- endfor %}
  }
{% endif %}
{% endfor %}
}


/**
 * System collections.
 */
export interface Schema {

{% for collection in registry.collections | only_with_custom_fields -%}
  {% if collection.is_system %}
  {% set suffix = "" if collection.is_singleton else "[]" %}

  {%- set field_count = collection.fields | only_custom_fields | length -%}
  /**
   * The extended {{ collection.name | to_collection_text }} collection.
   */
  {{ collection.name | to_ts_identifier }}: Collections.Extra{{ collection.name | to_collection_name }}{{ suffix }};
  {% endif %}
{% endfor %}

}


/**
 * User collections.
 */
export interface Schema {
{% for collection in registry.collections -%}
  {% if not collection.is_system %}
  {% set suffix = "" if collection.is_singleton else "[]" %}
  /**
   * The {{ collection.name | to_collection_text }} collection.
   */
  {{ collection.name | to_ts_identifier }}: Collections.{{ collection.name | pascal_case }}{{ suffix }};
  {% endif %}
{% endfor %}

}


/**
 * Helper functions
 */

{% for collection in registry.collections -%}
{% if not collection.is_system %}

{% if collection.is_singleton %}
/**
 * Reads the {{ collection.name | to_collection_text }} singleton.
 */
export function get{{ collection.name | to_collection_name }}<
  const Query extends Query$<Schema, Collections.{{ collection.name | to_collection_name }}>,
>(query?: Query) {
  return readSingleton$<Schema, {{ collection.name | to_collection_string }}, Query>("{{ collection.name }}", query);
}

{% else %}

/**
 * List {{ collection.name | to_collection_text }} items.
 */
export function list{{ collection.name | to_collection_name }}<
  const Query extends Query$<Schema, Collections.{{ collection.name | to_collection_name }}>,
>(query?: Query) {
  return readItems$<Schema, {{ collection.name | to_collection_string }}, Query>("{{ collection.name }}", query);
}

/**
 * Gets a single known {{ collection.name | to_collection_text }} item by id.
 */
export function read{{ collection.name | to_collection_name }}<
  const Query extends Query$<Schema, Collections.{{ collection.name | to_collection_name }}>,
>(key: string | number, query?: Query) {
  return readItem$<Schema, {{ collection.name | to_collection_string }}, Query>("{{ collection.name }}", key, query);
}

{% endif %}


{% endif %}
{% endfor %}

